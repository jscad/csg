const test = require('ava')

const {polyhedron} = require('./index')

const geom3 = require('../geometry/geom3')

const comparePolygonsAsPoints = require('../../test/helpers/comparePolygonsAsPoints')

test('polyhedron (points and faces)', t => {
  // points and faces form a cube
  const points = [ [-1, -1, -1], [-1, -1, 1], [-1, 1, 1], [-1, 1, -1], [1, -1, 1], [1, -1, -1], [1, 1, -1], [1, 1, 1] ]
  const faces = [[0, 1, 2, 3], [5, 6, 7, 4], [0, 5, 4, 1], [3, 2, 7, 6], [0, 3, 6, 5], [1, 4, 7, 2]]
  const obs = polyhedron({points: points, faces: faces})
  const pts = geom3.toPoints(obs)
  const exp = [
    [[-1.0000000, -1.0000000, -1.0000000],
     [-1.0000000, -1.0000000, 1.0000000],
     [-1.0000000, 1.0000000, 1.0000000],
     [-1.0000000, 1.0000000, -1.0000000], ],
    [[1.0000000, -1.0000000, -1.0000000],
     [1.0000000, 1.0000000, -1.0000000],
     [1.0000000, 1.0000000, 1.0000000],
     [1.0000000, -1.0000000, 1.0000000], ],
    [[-1.0000000, -1.0000000, -1.0000000],
     [1.0000000, -1.0000000, -1.0000000],
     [1.0000000, -1.0000000, 1.0000000],
     [-1.0000000, -1.0000000, 1.0000000], ],
    [[-1.0000000, 1.0000000, -1.0000000],
     [-1.0000000, 1.0000000, 1.0000000],
     [1.0000000, 1.0000000, 1.0000000],
     [1.0000000, 1.0000000, -1.0000000], ],
    [[-1.0000000, -1.0000000, -1.0000000],
     [-1.0000000, 1.0000000, -1.0000000],
     [1.0000000, 1.0000000, -1.0000000],
     [1.0000000, -1.0000000, -1.0000000], ],
    [[-1.0000000, -1.0000000, 1.0000000],
     [1.0000000, -1.0000000, 1.0000000],
     [1.0000000, 1.0000000, 1.0000000],
     [-1.0000000, 1.0000000, 1.0000000], ]
  ]
  t.deepEqual(pts.length, 6)
  t.true(comparePolygonsAsPoints(pts, exp))
})
